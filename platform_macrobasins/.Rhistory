axis(1, at = 1:12, labels = time(qobs_mon_LTM), tck = 0, cex.lab=.9,cex.axis=.8)
plot
# pdf(file = path_figs) #
dev.new()
layout(matrix(c(1,1,2,3),nrow=2,ncol = 2, byrow = TRUE))
# par(mfrow = c(2,1),lwd = 1)
plot.new()
plot.window(xlim = range((time(qsim_mon))), ylim = range(qsim_mon, qobs_mon,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
box(cex=.8)
lines(time(qsim_mon),qsim_mon, col = "dodgerblue", lwd = 1.2, type = "l")
lines(time(qsim_mon),qobs_mon, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = xticks, labels = format(as.POSIXct(xticks), "%m-%Y"), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l")
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l",ylab="")
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l",ylab="",xaxt="")
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l",ylab="",xaxt="")
dev.new()
layout(matrix(c(1,1,2,3),nrow=2,ncol = 2, byrow = TRUE))
# par(mfrow = c(2,1),lwd = 1)
plot.new()
plot.window(xlim = range((time(qsim_mon))), ylim = range(qsim_mon, qobs_mon,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
box(cex=.8)
lines(time(qsim_mon),qsim_mon, col = "dodgerblue", lwd = 1.2, type = "l")
lines(time(qsim_mon),qobs_mon, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = xticks, labels = format(as.POSIXct(xticks), "%m-%Y"), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l",ylab="",xaxt='n')
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,qsim_mon_LTM, col = "dodgerblue", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='')
lines(1:12,qobs_mon_LTM, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- time(qobs_mon_LTM)
# xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = 1:12, labels = time(qobs_mon_LTM), tck = 0, cex.lab=.9,cex.axis=.8)
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "dodgerblue", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='')
# plot.new()
# plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "grey27", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='')
lines(1:12,temp_mon_LTM$qobs_mm_mon_LTM_60_20, col = "black", lwd = 1, type = "l")
lines(1:12,temp_mon_LTM$pr_mm_mon_LTM_60_20, col = "blue", lwd = 1, type = "l")
lines(1:12,temp_mon_LTM$et_mm_mon_LTM_60_20, col = "orange", lwd = 1, type = "l")
temp_mon_LTM$et_mm_mon_LTM_60_20
plot.new()
plot.window(xlim = range((time(qsim_mon_LTM))), ylim = range(qsim_mon_LTM, qobs_mon_LTM,na.rm=T))
range(1:12)
range(temp_mon_LTM$qsim_mm_mon_LTM_60_20, temp_mon_LTM$qobs_mm_mon_LTM_60_20, temp_mon_LTM$pr_mm_mon_LTM_60_20, temp_mon_LTM$et_mm_mon_LTM_60_20)
plot.window(xlim = range(1:12), ylim = range(temp_mon_LTM$qsim_mm_mon_LTM_60_20, temp_mon_LTM$qobs_mm_mon_LTM_60_20, temp_mon_LTM$pr_mm_mon_LTM_60_20, temp_mon_LTM$et_mm_mon_LTM_60_20,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "grey27", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='')
# plot.new()
# plot.window(xlim = range(1:12), )
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "grey27", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='',
ylim = range(temp_mon_LTM$qsim_mm_mon_LTM_60_20, temp_mon_LTM$qobs_mm_mon_LTM_60_20, temp_mon_LTM$pr_mm_mon_LTM_60_20, temp_mon_LTM$et_mm_mon_LTM_60_20,na.rm=T))
lines(1:12,temp_mon_LTM$qobs_mm_mon_LTM_60_20, col = "black", lwd = 1, type = "l")
lines(1:12,temp_mon_LTM$pr_mm_mon_LTM_60_20, col = "blue", lwd = 1, type = "l")
lines(1:12,temp_mon_LTM$et_mm_mon_LTM_60_20, col = "orange", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
# xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Qsim", "Qobs","Pr","ET"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_basins/1_process_mhm_outputs_all_exp.R", echo=TRUE)
path_figs = paste0('figs/sim_',sim_short_name,'_qsim_gauge_',i,'.pdf')
pdf(file = path_figs) #
dev.new()
layout(matrix(c(1,1,2,3),nrow=2,ncol = 2, byrow = TRUE))
# par(mfrow = c(2,1),lwd = 1)
plot.new()
plot.window(xlim = range((time(qsim_mon))), ylim = range(qsim_mon, qobs_mon,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
box(cex=.8)
lines(time(qsim_mon),qsim_mon, col = "dodgerblue", lwd = 1.2, type = "l")
lines(time(qsim_mon),qobs_mon, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = xticks, labels = format(as.POSIXct(xticks), "%m-%Y"), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
# plot.new()
# plot.window(xlim = range(1:12), )
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "red", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='',
ylim = range(temp_mon_LTM$qsim_mm_mon_LTM_60_20, temp_mon_LTM$qobs_mm_mon_LTM_60_20, temp_mon_LTM$pr_mm_mon_LTM_60_20, temp_mon_LTM$et_mm_mon_LTM_60_20,na.rm=T))
lines(1:12,temp_mon_LTM$qobs_mm_mon_LTM_60_20, col = "black", lwd = 1.2, type = "l")
lines(1:12,temp_mon_LTM$pr_mm_mon_LTM_60_20, col = "blue", lwd = 1.2, type = "l")
lines(1:12,temp_mon_LTM$et_mm_mon_LTM_60_20, col = "orange", lwd = 1.2, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- time(qobs_mon_LTM)
# xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Qsim", "Qobs","Pr","ET"), col = c("red", "black","blue","orange"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = 1:12, labels = time(qobs_mon_LTM), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
dev.off()
pdf(file = path_figs) #
# dev.new()
layout(matrix(c(1,1,2,3),nrow=2,ncol = 2, byrow = TRUE))
# par(mfrow = c(2,1),lwd = 1)
plot.new()
plot.window(xlim = range((time(qsim_mon))), ylim = range(qsim_mon, qobs_mon,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
box(cex=.8)
lines(time(qsim_mon),qsim_mon, col = "dodgerblue", lwd = 1.2, type = "l")
lines(time(qsim_mon),qobs_mon, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = xticks, labels = format(as.POSIXct(xticks), "%m-%Y"), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
# plot.new()
# plot.window(xlim = range(1:12), )
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
# box(cex=.8)
plot(1:12,temp_mon_LTM$qsim_mm_mon_LTM_60_20, col = "red", lwd = 1.2, type = "l",ylab="",xaxt='n',xlab='',
ylim = range(temp_mon_LTM$qsim_mm_mon_LTM_60_20, temp_mon_LTM$qobs_mm_mon_LTM_60_20, temp_mon_LTM$pr_mm_mon_LTM_60_20, temp_mon_LTM$et_mm_mon_LTM_60_20,na.rm=T))
lines(1:12,temp_mon_LTM$qobs_mm_mon_LTM_60_20, col = "black", lwd = 1.2, type = "l")
lines(1:12,temp_mon_LTM$pr_mm_mon_LTM_60_20, col = "blue", lwd = 1.2, type = "l")
lines(1:12,temp_mon_LTM$et_mm_mon_LTM_60_20, col = "orange", lwd = 1.2, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- time(qobs_mon_LTM)
# xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Qsim", "Qobs","Pr","ET"), col = c("red", "black","blue","orange"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = 1:12, labels = time(qobs_mon_LTM), tck = 0, cex.lab=.9,cex.axis=.8)
mtext(paste0('daily KGE (1965-2021)= ', as.numeric(gof(qsim_mon,qobs_mon)["KGE",])),cex=.7,line=-1,adj = 0.02)
dev.off()
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_basins/1_process_mhm_outputs_all_exp.R", echo=TRUE)
dev.new()
# dev.new()
layout(matrix(c(1,1,2,3),nrow=2,ncol = 2, byrow = TRUE))
# par(mfrow = c(2,1),lwd = 1)
plot.new()
plot.window(xlim = range((time(qsim_mon))), ylim = range(qsim_mon, qobs_mon,na.rm=T))
# axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
box(cex=.8)
lines(time(qsim_mon),qsim_mon, col = "dodgerblue", lwd = 1.2, type = "l")
lines(time(qsim_mon),qobs_mon, col = "grey27", lwd = 1, type = "l")
title(main = paste0(attrib_i$gauge_name, ', Lat = ', round(attrib_i$gauge_lat,1), ' Mean Elev = ', round(attrib_i$mean_elev,0),'\n',
'Sim: ',sim_short_name,', gauge_id: ',i), cex.main = 0.7)
title(xlab = "", ylab = "Streamflow (m3/s)", cex.lab = 0.8)
xticks <- seq((as.Date(start(qsim_mon))), (as.Date(end(qsim_mon))), by = "month")
legend("topright", legend = c("Sim", "Obs"), col = c("dodgerblue", "grey27"), lwd = 1, cex = 0.8, bty = "n")
axis(1, at = xticks, labels = format(as.POSIXct(xticks), "%m-%Y"), tck = 0, cex.lab=.9,cex.axis=.8)
axis(2, at = axTicks(2), labels = pretty(axTicks(2)), tck = 0, cex.lab=.9,cex.axis=.8)
axTicks(2)
axis(2, at = axTicks(2), labels =axTicks(2), tck = 0, cex.lab=.9,cex.axis=.8)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_basins/1_process_mhm_outputs_all_exp.R", echo=TRUE)
write.csv(data_platform_mon,file=paste0('results_processed','/data_platform_mon.csv'),row.names = FALSE)
write.csv(data_platform_yr,file=paste0('results_processed','/data_platform_yr.csv'),row.names = FALSE)
write.csv(data_platform_mon_LTM,file=paste0('results_processed','/data_platform_mon_LTM.csv'),row.names = FALSE)
source("~/Dropbox/mHM/data_processing/regionalization_macrobasins/regionalization.R", echo=TRUE)
?monthlyfunction
debugSource("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
debugSource("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
debugSource("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
# na.rm = TRUE
sum(is.na(qobs_mon))
qobs_mon
# na.rm = TRUE
sum(is.na(window(qobs_mon, start = dini, end = dend)))
length(is.na(window(qobs_mon, start = dini, end = dend)))
# na.rm = TRUE
sum(is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))
sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend))
)
sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8
monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=F)
monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=T)
dini='2040-01-01'
dend='2070-12-31'
sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))
(sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8)
if (sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8){
qobs_mon_LTM_1960_2020  = monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=T)
}
(sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))
)
is.na((sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend))))
)
if (TRUE | FALSE){a=1}
if (sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8){
qobs_mon_LTM_1960_2020  = monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=T)
}else{
qobs_mon_LTM_1960_2020  = monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=F)
}
(sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8)
dini='1960-01-01'
dend='2020-12-31'
if (sum(!is.na(window(qobs_mon, start = dini, end = dend)))/length(is.na(window(qobs_mon, start = dini, end = dend)))>0.8){
qobs_mon_LTM_1960_2020  = monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=T)
}else{
qobs_mon_LTM_1960_2020  = monthlyfunction(window(qobs_mon, start = dini, end = dend),FUN=mean,na.rm=F)
}
qobs_mon_LTM_1960_2020
dini='2040-01-01'
dend='2070-12-31'
pr_mon_LTM_2040_2070    = monthlyfunction(window(pr_mon, start = dini, end = dend),FUN=mean)
debugSource("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
qobs_mon_LTM_1990_2020
xzoo <- zoo()
temp_mon_LTM          = data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020,
qsim_mm_mon_LTM_1990_2020=xzoo)
temp_mon_LTM          = data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020,
qsim_mm_mon_LTM_1990_2020=xzoo)
data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020))
data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020)
data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020,
qsim_mm_mon_LTM_1990_2020=xzoo)
xzoo <- zoo(12)
xzoo <- zoo(NA*(1:12))
xzoo
temp_mon_LTM          = data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020,
qsim_mm_mon_LTM_1990_2020=xzoo)
temp_mon_LTM
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
date_ini<'1970-01-01'
pr_mon_LTM_1960_2020
(date_ini<'1970-01-01' & date_end<'2050-01-01')
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
pr_mon_LTM_2040_2070
data.frame(gauge_id=attrib_i$gauge_id,
gauge_name=attrib_i$gauge_name,
area_km2=attrib_i$area_km2,
date=time(pr_mon_LTM_1960_2020),
sim_short_name=sim_short_name,
sim_pr_name=sim_pr_name,
sim_pet_name=sim_pet_name,
sim_txn_name=sim_txn_name,
sim_lai_name=sim_lai_name,
pr_mm_mon_LTM_1960_2020=pr_mon_LTM_1960_2020,
et_mm_mon_LTM_1960_2020=et_mon_LTM_1960_2020,
tmin_C_mon_LTM_1960_2020=tmin_mon_LTM_1960_2020,
tmax_C_mon_LTM_1960_2020=tmax_mon_LTM_1960_2020,
tavg_C_mon_LTM_1960_2020=tavg_mon_LTM_1960_2020,
pet_mm_mon_LTM_1960_2020=pet_mon_LTM_1960_2020,
qobs_m3s_mon_LTM_1960_2020=qobs_mon_LTM_1960_2020,
qobs_mm_mon_LTM_1960_2020=NA,
qsim_m3s_mon_LTM_1960_2020=qsim_mon_LTM_1960_2020,
qsim_mm_mon_LTM_1960_2020=NA,
pr_mm_mon_LTM_1960_1990=pr_mon_LTM_1960_1990,
et_mm_mon_LTM_1960_1990=et_mon_LTM_1960_1990,
tmin_C_mon_LTM_1960_1990=tmin_mon_LTM_1960_1990,
tmax_C_mon_LTM_1960_1990=tmax_mon_LTM_1960_1990,
tavg_C_mon_LTM_1960_1990=tavg_mon_LTM_1960_1990,
pet_mm_mon_LTM_1960_1990=pet_mon_LTM_1960_1990,
qobs_m3s_mon_LTM_1960_1990=qobs_mon_LTM_1960_1990,
qobs_mm_mon_LTM_1960_1990=NA,
qsim_m3s_mon_LTM_1960_1990=qsim_mon_LTM_1960_1990,
qsim_mm_mon_LTM_1960_1990=NA,
pr_mm_mon_LTM_1990_2020=pr_mon_LTM_1990_2020,
et_mm_mon_LTM_1990_2020=et_mon_LTM_1990_2020,
tmin_C_mon_LTM_1990_2020=tmin_mon_LTM_1990_2020,
tmax_C_mon_LTM_1990_2020=tmax_mon_LTM_1990_2020,
tavg_C_mon_LTM_1990_2020=tavg_mon_LTM_1990_2020,
pet_mm_mon_LTM_1990_2020=pet_mon_LTM_1990_2020,
qobs_m3s_mon_LTM_1990_2020=qobs_mon_LTM_1990_2020,
qobs_mm_mon_LTM_1990_2020=NA,
qsim_m3s_mon_LTM_1990_2020=qsim_mon_LTM_1990_2020,
qsim_mm_mon_LTM_1990_2020=NA)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
time(temp_mon_LTM$qsim_mm_mon_LTM_2070_2100)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
xticks <- time(temp_mon_LTM$sim_mm_mon_LTM_1960_1990)
xticks <- time(pr_mm_mon_LTM_1960_1990)
xticks <- time(pr_mon_LTM_1960_1990)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
range(0,temp_mon_LTM$pr_mm_mon_LTM_1960_2020)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
source("~/Dropbox/mHM/data_processing/post_process_platform_2023_04/platform_macrobasins/1_process_simulations_macrobasins.R", echo=TRUE)
